# RabbitMQ Configuration for TaskMan
# Optimized for event-driven microservices architecture

# Management plugin
management.tcp.port = 15672

# Connection settings
listeners.tcp.default = 5672
heartbeat = 60
# connection_timeout = 10000  # Invalid setting - replaced with handshake_timeout
handshake_timeout = 10000

# Memory and disk settings
vm_memory_high_watermark.relative = 0.6
disk_free_limit.relative = 2.0

# Clustering settings (for future scaling)
cluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config

# Exchange and queue settings
default_vhost = /
default_user_tags.administrator = true

# Message TTL and delivery settings  
default_permissions.configure = .*
default_permissions.read = .*
default_permissions.write = .*

# Logging
log.console = true
log.console.level = info
log.file = false

# Performance tuning
channel_max = 2047
connection_max = 1000
tcp_listen_options.backlog = 128
tcp_listen_options.nodelay = true
tcp_listen_options.keepalive = true

# Dead letter exchange configuration
# policies_file = /etc/rabbitmq/policies.json  # Disabled - file doesn't exist

# Enable management definitions import
management.load_definitions = /etc/rabbitmq/definitions.json